!function(K,L,t,J){function G(b){return I(b)&&!v(b)&&"undefined"!==b}var C,F,E=L.ui.Widget,u=(L.Class,L.DataSource),y=(Math.min,Math.max,K.proxy),w=K.each,x=K.map,z=L.error,H=L.format,I=L.is.defined,v=L.is["null"],D=L.to["int"],A="change",B="click";C={cls:J,width:J,height:J,dataSource:J,readDataSource:!0,title:J,textTemplate:"{text}",hrefTemplate:"{href}",targetTemplate:"{target}",frequencyTemplate:"{frequency}",minSize:90,maxSize:250,events:{}},F=E.extend({init:function(){E.fn.init.apply(this,arguments);var n,b=this,o=K(b.element),p=b.options,m=p.title,l=p.dieOnError,h=p.dataSource,d=p.cls;return"div"!==o.prop("tagName").toLowerCase()?void z("shieldTagCloud: Underlying element is not DIV.",l):(n=b._eventNS=".shieldTagCloud"+b.getInstanceId(),o.empty(),m&&o.append('<div class="sui-tagcloud-title">'+m+"</div>"),b._contentEl=K('<div class="sui-tagcloud-content">').appendTo(o),o.addClass("sui-tagcloud"+(d?" "+d:"")),I(p.width)&&o.css("width",p.width),I(p.height)&&o.css("height",p.height),h?(b.dataSource=u.create(h),b.dataSource.on(A+n,y(b._dsChange,b)),void (p.readDataSource&&b.dataSource.read())):(b.destroy(),void z("shieldTagCloud: No dataSource or underlying UL element found.",l)))},_dsChange:function(){this._render()},_render:function(){var f=this,g=f._contentEl,e=f.dataSource.view||[],h=f._getMinMax(e);g.empty().append(x(e,function(a){return f._createItem(a,h[0],h[1])}))},_createItem:function(Q,n,T){var O,e,f,i,k,M=this,R=M.options,b=R.minSize,S=R.maxSize,P=K('<div class="sui-tagcloud-item" />'),N=H(R.textTemplate,Q);return G(N)&&(O=H(R.hrefTemplate,Q),G(O)?(i=K('<a href="'+O+'" class="sui-tagcloud-link">'+N+"</a>").appendTo(P),k=H(R.targetTemplate,Q),G(k)&&i.attr("target",k)):P.html(N)),f=D(H(R.frequencyTemplate,Q)),e=T>n?(f-n)*(S-b)/(T-n)+b:100,P.css("font-size",e+"%").on(B,y(M._itemClick,M,Q)),P},_itemClick:function(e,f){var h=this,g=h.trigger(B,{item:e});g.isDefaultPrevented()&&f&&f.preventDefault()},_getMinMax:function(i){var e,h=this,d=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY;return w(i||[],function(a,b){e=D(H(h.options.frequencyTemplate,b)),(!I(j)||e>j)&&(j=e),(!I(d)||d>e)&&(d=e)}),[d,j]},destroy:function(){var f=this,h=f.element,g=f.options,e=g.cls;f.dataSource&&f.dataSource.off(A+f._eventNS),h.removeClass("sui-tagcloud"+(e?" "+e:"")).empty(),E.fn.destroy.call(f)}}),F.defaults=C,L.ui.plugin("TagCloud",F)}(jQuery,shield,this);