!function(Z,X,T,A){var M=X.ui.Widget,H=X.Class,Y=document,J=X.is,F=(X.get,X.format,X.to["int"]),W=(Math.abs,Z.each,Z.proxy),S=(Z.extend,Z.map,J.undefined),C=T.opera,D=navigator.userAgent,B=/msie/i.test(D)&&!C,L=(B&&7===Y.documentMode,"keydown"),K="click",P="mousedown",I="change",V="select",G="cancel",Q="display",R="none",E={palette:"basic",basicPalette:{columns:10,tileSize:{width:16,height:16},tileBorderWidth:0,palette:["#FFFFFF","#FFCCCC","#FFCC99","#FFFF99","#FFFFCC","#99FF99","#99FFFF","#CCFFFF","#CCCCFF","#FFCCFF","#CCCCCC","#FF6666","#FF9966","#FFFF66","#FFFF33","#66FF99","#33FFFF","#66FFFF","#9999FF","#FF99FF","#BBBBBB","#FF0000","#FF9900","#FFCC66","#FFFF00","#33FF33","#66CCCC","#33CCFF","#6666CC","#CC66CC","#999999","#CC0000","#FF6600","#FFCC33","#FFCC00","#33CC00","#00CCCC","#3366FF","#6633FF","#CC33CC","#666666","#990000","#CC6600","#CC9933","#999900","#009900","#339999","#3333FF","#6600CC","#993399","#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366","#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]},advancedPalette:{type:"hex",buttons:!0,messages:{apply:"Apply",cancel:"Cancel"}},displayInline:!1,showLetter:!1,value:""},N=M.extend({init:function(a,f){M.fn.init.apply(this,arguments);var i,j=this,d=j.options;if(arguments.length>1&&(f=arguments[1],f.basicPalette&&f.basicPalette.palette&&(d.basicPalette.palette=f.basicPalette.palette)),j.element.css(Q,R),j._enabled=!0,j.currentColor=new U({color:d.value}),d.displayInline){j._buildPalette()}else{if(j._picker=i=Z('<span class="sui-color-picker-dropdown" tabindex="0"><span class="sui-color-cell sui-unselectable" unselectable="on">&nbsp;</span><span class="sui-caret-container sui-unselectable" unselectable="on"><span class="sui-caret" unselectable="on"></span></span></span>').insertAfter(j.element),d.showLetter){var b=i.find(".sui-color-cell");Z('<span class="sui-tool-letter">A<span class="sui-selected-color"></span></span>').appendTo(b),i.find(".sui-selected-color").css("background-color",j.currentColor.color.cssa())}else{i.find(".sui-color-cell").css("background-color",j.currentColor.color.cssa())}i.on(K,j._pickerClicked=W(j._pickerClickedHandler,j)),Z(Y).on(P+".shieldColorPicker"+j.getInstanceId(),W(j._hidePopup,j))}j.currentColor.color.cssa?j._oldColor=j.currentColor.color.cssa():j._oldColor=j.currentColor.color.toRGB().cssa()},_buildPalette:function(){var b=this;"basic"==b.options.palette?b._buildBasicPalette():(b._buildAdvancedPalette(),b._changeAdvancedPaletteColor())},_changeAdvancedPaletteColor:function(){var d=this,c=d.currentColor.color.toHSV();d.wrapperDiv&&(d._hue=c.hue,d._isHsl?(c=d.currentColor.color.toHSL(),d._XY(d,{pointer:d.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:c.hue,y:1-c.saturation}),d._Z(d,1-c.lightness,d.wrapperDiv.find(".sui-color-scale .pointer").get(0))):(d._XY(d,{pointer:d.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:c.saturation,y:1-c.value}),d._Z(d,c.hue,d.wrapperDiv.find(".sui-color-scale .pointer").get(0))))},_pickerClickedHandler:function(){var b=this;b.wrapperDiv||b._buildPalette(),b._showPopup()},_showPopup:function(){var p=this,n=p._picker.offset(),b=n.top-Z(Y).scrollTop(),i=p._picker.height(),a=Z(T).height();if("advanced"===p.options.palette&&(p.currentColor.color.cssa?p._oldColor=p.currentColor.color.cssa():p._oldColor=p.currentColor.color.toRGB().cssa()),!p.wrapperDiv||p.wrapperDiv.css(Q)==R){p._popupIsOver=!1;var o=n.top+i+1,g=n.left,j=p.wrapperDiv.height();j+b+i>a?o=n.top-j-1:o++,(0>o||Z(Y).scrollTop()>o)&&(o=n.top+i+1),n.top>o?p._popupIsOver=!0:p._popupIsOver=!1,p.wrapperDiv||this._buildPalette(),p._popupIsOver?(p.wrapperDiv.css({position:"absolute",zIndex:10002,top:o+j,left:g,height:0,display:""}),p.wrapperDiv.animate({height:j,top:o},150)):(p.wrapperDiv.css({position:"absolute",zIndex:10002,top:o-1,left:g}),p.wrapperDiv.slideDown(150,function(){}))}},_hidePopup:function(f){var l,a=this,n=a.options,j=Z(f.target);if(("basic"==n.palette||!(j.hasClass("sui-colorpicker")||j.parents(".sui-colorpicker").length>0))&&a.wrapperDiv&&a.wrapperDiv.css(Q)!=R){if("basic"===n.palette){var m=a._picker.find(".sui-tool-letter > .sui-selected-color");0===m.length&&(m=a._picker.find(".sui-color-cell")),m.css("background-color",a.currentColor.color.css())}a._popupIsOver?(l=a.wrapperDiv.height(),a.wrapperDiv.animate({height:0,top:a._picker.offset().top},150,function(){Z(this).css(Q,R),Z(this).css("height",l)})):a.wrapperDiv.slideUp(150,function(){});var i;i=a.currentColor.color.cssa?a.currentColor.color.cssa():a.currentColor.color.toRGB().cssa(),"basic"!=n.palette&&(n.advancedPalette.buttons?i!==a._oldColor&&(a.currentColor=new U({color:a._oldColor}),setTimeout(function(){a._update(),a.trigger(G)},200)):(a._changeSelectedColorCell(),a.trigger(I)))}},_buildBasicPalette:function(){var p,q=this,d=q.options,r=d.basicPalette,j=r.palette,i=r.tileSize,b=0,a=Z("<div class='sui-colorpicker sui-colorpicker-basic-palette'/>");p=d.displayInline?a.insertAfter(q.element):a.appendTo(Y.body).css(Q,R);for(var k=0;k<j.length;k++){Z("<div class='sui-palette-tile'/>").css({backgroundColor:j[k],width:i.width,height:i.height,borderWidth:r.tileBorderWidth,margin:"0 "+r.tileBorderWidth+"px "+r.tileBorderWidth+"px 0"}).on(P,q._tileClicked=W(q._tileClickedHandler,q)).appendTo(p).addClass(q.currentColor.color.hex().toUpperCase()==j[k].toUpperCase()?"sui-palette-tile-selected":"")}b=r.columns*F(i.width)+r.columns*r.tileBorderWidth,p.css("width",b+"px"),q.wrapperDiv=p},_tileClickedHandler:function(f){var a=this;if(a._enabled){a.wrapperDiv.find(".sui-palette-tile-selected").removeClass("sui-palette-tile-selected"),Z(f.target).addClass("sui-palette-tile-selected");var e=Z(f.target).css("background-color");a.currentColor=new U({color:e}),a.trigger(V)}},_buildAdvancedPalette:function(){var j,i,s,t=this,l=t.options;s=l.displayInline?Z("<div />").insertAfter(t.element).addClass("sui-colorpicker"):Z("<div />").appendTo(Y.body).addClass("sui-colorpicker").css(Q,R),t.wrapperDiv=s,i=Z("<div class='sui-hex-wrapper' />").appendTo(s),t.colorDiv=Z("<div class='sui-color-div' />").appendTo(i),"hsl"==l.advancedPalette.type?t.colorInput=Z("<input class='sui-alpha-input' />").appendTo(i):t.colorInput=Z("<input class='sui-hex-input' />").appendTo(i),t.colorInput.on(L,t._colorInputKeyDown=W(t._colorInputKeyDownHandler,t));var d="<div class='sui-color-palette'><div class='pointer'><div class='shape shape1'></div><div class='shape shape2'></div></div><div class='bg bg1'></div><div class='bg bg2'></div></div><div class='sui-color-scale'><div class='pointer'><div class='shape'></div></div><div class='bg'></div></div>";Z(d).appendTo(s);var c=new O({twod:s.find(".sui-color-palette").get(0),pointer:s.find(".sui-color-palette .pointer").get(0),oned:s.find(".sui-color-scale").get(0),isXYslider:!0,cbs:{begin:t._changeXY,change:t._changeXY,end:t._done}},t);t.xy=c;var b=new O({twod:s.find(".sui-color-palette").get(0),pointer:s.find(".sui-color-scale .pointer").get(0),oned:s.find(".sui-color-scale").get(0),isXYslider:!1,cbs:{begin:t._changeZ,change:t._changeZ,end:t._done}},t);if(t.z=b,"rgb"==l.advancedPalette.type){j="<div class='extras'/>";var o=Z(j).appendTo(s);Z("<span class='sui-r-text'>R:</span>").appendTo(o),t.rInput=Z("<input class='sui-r-input' />").appendTo(o),t._rInputKeyDown=W(t._rInputKeyDownHandler,t),Z("<span class='sui-g-text'>G:</span>").appendTo(o),t.gInput=Z("<input class='sui-g-input' />").appendTo(o),t._gInputKeyDown=W(t._gInputKeyDownHandler,t),Z("<span class='sui-b-text'>B:</span>").appendTo(o),t.bInput=Z("<input class='sui-b-input' />").appendTo(o),t._bInputKeyDown=W(t._bInputKeyDownHandler,t),X.ui.NumericTextBox&&(t.rInput=new X.ui.NumericTextBox(t.rInput,{min:0,max:255,step:0.01,spinners:!1,cls:"rgbInputs",events:{change:t._rInputKeyDown}}),t.gInput=new X.ui.NumericTextBox(t.gInput,{min:0,max:255,step:0.01,spinners:!1,cls:"rgbInputs",events:{change:t._gInputKeyDown}}),t.bInput=new X.ui.NumericTextBox(t.bInput,{min:0,max:255,step:0.01,spinners:!1,cls:"rgbInputs",events:{change:t._bInputKeyDown}}))}if("hsl"==l.advancedPalette.type){t._isHsl=!0,j="<div class='sui-transparent-slider'><div class='sui-color-scale alpha'><div class='pointer' style='top: 0%;'><div class='shape'></div></div><div class='bg'></div></div></div>",s.addClass("sui-hsl"),Z(j).appendTo(s);var a=new O({twod:s.find(".alpha").get(0),pointer:s.find(".alpha .pointer").get(0),oned:s.find(".alpha").get(0),isXYslider:!1,cbs:{begin:t._changeA,change:t._changeA,end:t._done}},t);t.a=a}l.advancedPalette.buttons&&t._buildButtons()},_buildButtons:function(){var a=this,n=this.options.advancedPalette.messages,m=Z("<div class='sui-buttons-wrapper' />").appendTo(this.wrapperDiv);if(X.ui.Button){var l=Z("<button type='button'>"+n.apply+"</button>").appendTo(m),k=new X.ui.Button(l,{cls:"sui-apply",events:{click:W(a._applyHandler,this)}});a._applyButton=k;var d=Z("<button type='button'>"+n.cancel+"</button>").appendTo(m),c=new X.ui.Button(d,{cls:"sui-cancel",events:{click:W(a._cancelHandler,this)}});a._cancelButton=c}},_applyHandler:function(c){var d=this;d.currentColor.color.cssa?d._oldColor=d.currentColor.color.cssa():d._oldColor=d.currentColor.color.toRGB().cssa(),d._changeSelectedColorCell(),d.options.displayInline||d._hidePopup(c),d.trigger(I)},_changeSelectedColorCell:function(){var e,f=this,h=f.options,g=f._picker;e=f.currentColor.color.cssa?f.currentColor.color.cssa():f.currentColor.color.toRGB().cssa(),h.displayInline||(h.showLetter?g.find(".sui-selected-color").css("background-color",e):g.find(".sui-color-cell").css("background-color",e))},_cancelHandler:function(c){var d=this;d.options.displayInline?(d.currentColor=new U({color:d._oldColor}),setTimeout(function(){d._update(),d.trigger(G)},200)):d._hidePopup(c)},_update:function(){var e,f=this,h=f._shouldUpdateMainInput,g=f._shouldUpdateRgbInputs;f._isHsl?(e=f.currentColor.color.toHSL(),f._XY(f,{pointer:f.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:e.hue,y:1-e.saturation}),f._shouldUpdateMainInput=h,f._Z(f,1-e.lightness,f.wrapperDiv.find(".sui-color-scale .pointer").get(0)),f.Y(f.wrapperDiv.find(".alpha .pointer").get(0),(1-e.alpha).toFixed(2))):(e=f.currentColor.color.toHSV(),f._XY(f,{pointer:f.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:e.saturation,y:1-e.value}),f._shouldUpdateMainInput=h,f._shouldUpdateRgbInputs=g,f._Z(f,e.hue,f.wrapperDiv.find(".sui-color-scale .pointer").get(0)))},_rInputKeyDownHandler:function(c){var d=this;setTimeout(function(){var a=c.value;d.currentColor.color.red=parseFloat(a)/255,d._shouldUpdateRgbInputs=!1,d._update(),d.trigger(V)},1)},_gInputKeyDownHandler:function(c){var d=this;setTimeout(function(){var a=c.value;d.currentColor.color.green=parseFloat(a)/255,d._shouldUpdateRgbInputs=!1,d._update(),d.trigger(V)},1)},_bInputKeyDownHandler:function(c){var d=this;setTimeout(function(){var a=c.value;d.currentColor.color.blue=parseFloat(a)/255,d._shouldUpdateRgbInputs=!1,d._update(),d.trigger(V)},1)},_colorInputKeyDownHandler:function(c){var d=this;c.ctrlKey||setTimeout(function(){var e=c.currentTarget,b=e.value,a=d.currentColor;d.currentColor=new U({color:b}),J.object(d.currentColor.color)?(d._shouldUpdateRgbInputs=!0,d._shouldUpdateMainInput=!1,d._update()):d.currentColor=a,d.trigger(V)},1)},_changeA:function(d,c){if(d.colorPicker._enabled){d.colorPicker.colorInput.val("rgba(0,0,0,1)");d.colorPicker._A(d.colorPicker,d.colorPicker.clamp(c.y,0,1),d.colorPicker.a.pointer)}},_changeZ:function(d,c){if(d.colorPicker._enabled){d.colorPicker._isHsl?d.colorPicker.colorInput.val("rgba(0,0,0,1)"):d.colorPicker.colorInput.val("#000000");d.colorPicker._Z(d.colorPicker,d.colorPicker.clamp(c.y,0,1),d.colorPicker.z.pointer);d.colorPicker.trigger(V)}},_changeXY:function(d,c){if(d.colorPicker._enabled){d.colorPicker._isHsl?d.colorPicker.colorInput.val("rgba(0,0,0,1)"):d.colorPicker.colorInput.val("#000000");d.colorPicker._XY(d.colorPicker,{x:d.colorPicker.clamp(c.x,0,1),y:d.colorPicker.clamp(c.y,0,1),pointer:c.pointer},d.colorPicker.xy);d.colorPicker.X(c.pointer,c.x),d.colorPicker.Y(c.pointer,c.y),d.colorPicker.trigger(V)}},_XY:function(i,h){var n,m=this;if(i._enabled){if(i.X(h.pointer,h.x),i.Y(h.pointer,h.y),m._isHsl){n=i.currentColor.color.toHSL?i.currentColor.color.toHSL():i.currentColor.color,n.hue=h.x,n.saturation=1-h.y;var j=n.lightness;n.lightness=0.5,m.wrapperDiv.find(".sui-color-scale").css("background-color",n.toRGB().cssa()),n.lightness=j}else{n=i.currentColor.color.toHSV(),h.x>1&&(h.x=1),h.x<0&&(h.x=0),h.y<0&&(h.y=0),h.y>1&&(h.y=1),n.saturation=h.x,n.value=1-h.y,0===n.hue&&(n.hue=m._hue)}var l=n.toRGB(),k=i.colorInput.val();k!=l.hex()&&(m._shouldUpdateMainInput?(k.length>4||0===k.length)&&(m._isHsl?i.colorInput.val(l.cssa()):i.colorInput.val(l.hex())):m._shouldUpdateMainInput=!0),i.rInput&&(m._shouldUpdateRgbInputs?(i.rInput.value((255*l.red).toFixed(2)),i.gInput.value((255*l.green).toFixed(2)),i.bInput.value((255*l.blue).toFixed(2))):m._shouldUpdateRgbInputs=!0),i.colorDiv.get(0).style.background=l.cssa(),i.currentColor.color=l}},_Z:function(i,k,j){var h,n=this,l=i.colorInput.val();if(n._isHsl){h=i.currentColor.color.toHSL?i.currentColor.color.toHSL():i.currentColor.color,i.Y(j,k),h.lightness=1-k,i.colorDiv.get(0).style.background=h.toRGB().cssa(),i.currentColor.color=h,l!=h.toRGB().hex()&&(n._shouldUpdateMainInput?(l.length>4||0===l.length)&&(n._isHsl?i.colorInput.val(h.toRGB().cssa()):i.colorInput.val(h.toRGB().hex())):n._shouldUpdateMainInput=!0)}else{h=i.currentColor.color.toHSV(),i.Y(j,k),i._rgbBg(i,i.wrapperDiv.find(".sui-color-palette").get(0),k),n._hue=h.hue=k;var m=h.toRGB();l!=m.hex()&&(l.length>4||0===l.length)&&(n._isHsl?i.colorInput.val(m.cssa()):i.colorInput.val(m.hex())),i.rInput&&(n._shouldUpdateRgbInputs?(i.rInput.value((255*m.red).toFixed(2)),i.gInput.value((255*m.green).toFixed(2)),i.bInput.value((255*m.blue).toFixed(2))):n._shouldUpdateRgbInputs=!0),i.colorDiv.get(0).style.background=m.cssa(),i.currentColor.color=m}},_A:function(h,j,i){var e,l=this,k=h.colorInput.val();e=h.currentColor.color.toHSL?h.currentColor.color.toHSL():h.currentColor.color,h.Y(i,j),e.alpha=(1-j).toFixed(2),h.colorDiv.get(0).style.background=e.toRGB().cssa(),h.currentColor.color=e,k!=e.toRGB().hex()&&(l._shouldUpdateMainInput?(k.length>4||0===k.length)&&(h.colorInput.val(e.toRGB().cssa()),l.trigger(V)):l._shouldUpdateMainInput=!0)},_rgbBg:function(f,e,h){var g=new U({}).HSV(h,1,1).toRGB().cssa();f.BG(e,g)},clamp:function(e,d,f){return Math.min(Math.max(e,d),f)},X:function(d,c){d.style.left=this.clamp(100*c,0,100)+"%"},Y:function(d,c){d.style.top=this.clamp(100*c,0,100)+"%"},BG:function(d,c){d.style.background=c},_done:function(){},enabled:function(){var e=this,f=(e.options,[].slice.call(arguments));if(!(f.length>0)){return e._enabled}var d=f[0];d?(e._picker&&e._picker.removeClass("sui-colorpicker-disabled"),e.wrapperDiv&&e.wrapperDiv.removeClass("sui-colorpicker-disabled")):(e._picker&&e._picker.addClass("sui-colorpicker-disabled"),e.wrapperDiv&&e.wrapperDiv.addClass("sui-colorpicker-disabled")),e._applyButton&&e._applyButton.enabled(d),e._cancelButton&&e._cancelButton.enabled(d),d?(e.colorInput&&e.colorInput.removeAttr("readonly"),e.rInput&&(e.rInput.enable(!0),e.gInput.enable(!0),e.bInput.enable(!0))):(e.colorInput&&e.colorInput.attr("readonly","readonly"),e.rInput&&(e.rInput.enable(!1),e.gInput.enable(!1),e.bInput.enable(!1))),e._enabled=d},value:function(){var n,a=this,k=a.options,j=[].slice.call(arguments);if(!(j.length>0)){return n=a.currentColor.color,n.css||(n=n.toRGB()),n}if(n=j[0],a.currentColor=new U({color:n}),"basic"==k.palette){var f=a.currentColor.color.css();if(a.wrapperDiv){for(var m=a.wrapperDiv.find(".sui-palette-tile"),l=0;l<m.length;l++){m[l].style.backgroundColor.replace(/\s+/g,"")===f.replace(/\s+/g,"")&&(m.removeClass("sui-palette-tile-selected"),Z(m[l]).addClass("sui-palette-tile-selected"))}}}else{a._changeAdvancedPaletteColor()}if(!k.displayInline){if(k.showLetter){a._picker.find(".sui-color-cell");a._picker.find(".sui-selected-color").css("background-color",a.currentColor.color.cssa())}else{a._picker.find(".sui-color-cell").css("background-color",a.currentColor.color.cssa())}}},destroy:function(){var a=this;a.element.remove(),a.wrapperDiv.remove(),a.colorInput&&a.colorInput.off(L,a._colorInputKeyDown),a.rInput&&(a.rInput.destroy(),a.gInput.destroy(),a.bInput.destroy()),a.options.displayInline&&"basic"==a.options.palette&&(a.wrapperDiv.find(".sui-palette-tile").off(K,a._tileClicked),a.wrapperDiv.remove()),a._applyButton&&a._applyButton.destroy(),a._cancelButton&&a._cancelButton.destroy(),Z(Y).off(P+".shieldColorPicker"+a.getInstanceId()),a._tileClicked=a._rInputKeyDown=a._gInputKeyDown=a._bInputKeyDown=a._hidePopupDelegate=a._picker=a._applyButton=a._cancelButton=a._isHsl=a.currentColor=a.wrapperDiv=a.colorInput=a.colorDiv=a.rInput=a.gInput=a._enabled=a._popupIsOver=a.bInput=null,M.fn.destroy.call(a)}}),O=H.extend({init:function(i,l){var j=this,k=i.isXYslider,o=i.cbs,n=i.twod,p=i.pointer,m=i.oned;return j.colorPicker=l,k?(j.drag(n,j.attachPointer(j,o,p)),{background:n,pointer:p}):(j.drag(m,j.attachPointer(j,o,p)),{background:m,pointer:p})},drag:function(d,c){return d?void (this.isTouch()?this.dragTemplate(d,c,"touchstart","touchmove","touchend"):this.dragTemplate(d,c,"mousedown","mousemove","mouseup")):void console.warn("drag is missing elem!")},attachPointer:function(i,h,k){function j(b){return function(d,a){a.pointer=k,b(d,a)}}var l={};for(var g in h){h.hasOwnProperty(g)&&(l[g]=j(h[g]))}return l},isTouch:function(){return"undefined"!=typeof T.ontouchstart},dragTemplate:function(r,s,n,q,p){var t=this,o=!1;s=t.getCbs(s);var m=s.begin,l=s.change,b=s.end;t.on(r,n,function(e){function d(){o=!1,t.off(Y,q,a),t.off(Y,p,d),t.callCb(b,r,e)}o=!0;var a=t.partial(t,t.callCb,l,r);t.on(Y,q,a),t.on(Y,p,d),t.callCb(m,r,e)})},on:function(e,d,f){e.addEventListener?e.addEventListener(d,f,!1):e.attachEvent&&e.attachEvent("on"+d,f)},off:function(e,d,f){e.removeEventListener?e.removeEventListener(d,f,!1):e.detachEvent&&e.detachEvent("on"+d,f)},getCbs:function(e){if(e){return{begin:e.begin||function(){},change:e.change||function(){},end:e.end||function(){}}}var d,f;return{begin:function(b){d={x:b.elem.offsetLeft,y:b.elem.offsetTop},f=b.cursor},change:function(b){b.elem.style.left=d.x+b.cursor.x-f.x+"px",b.elem.style.top=d.y+b.cursor.y-f.y+"px"},end:function(){}}},callCb:function(m,t,s){var q=this;s.preventDefault();var p=Z(t).offset(),l=t.clientWidth,a=t.clientHeight,r={x:q.cursorX(t,s),y:q.cursorY(t,s)},o=(r.x-p.left)/l,n=(r.y-p.top)/a;m(this,{x:isNaN(o)?0:o,y:isNaN(n)?0:n,cursor:r,elem:t,e:s})},partial:function(h,f){var g=Array.prototype.slice,j=g.apply(arguments,[2]),i=this;return function(){return f.apply(i,j.concat(g.apply(arguments)))}},cursorX:function(h,b){var g=this;if(g.isFixed(h)){var f=parseInt(g.getStyle(Y.body,"marginLeft"),10)-g.calc(h,"scrollLeft")+T.pageXOffset+h.style.marginLeft;return b.clientX-f}return b.pageX?b.pageX:b.clientX?b.clientX+Y.body.scrollLeft:void 0},cursorY:function(h,b){var g=this;if(g.isFixed(h)){var f=parseInt(g.getStyle(Y.body,"marginTop"),10)-g.calc(h,"scrollTop")+T.pageYOffset+h.style.marginTop;return b.clientY-f}return b.pageY?b.pageY:b.clientY?b.clientY+Y.body.scrollTop:void 0},calc:function(e,f){for(var d=0;"HTML"!=e.nodeName;){d+=e[f],e=e.parentNode}return d},isFixed:function(b){for(;"HTML"!=b.nodeName&&"fixed"!=this.usedStyle(b,"position");){b=b.parentNode}return"HTML"==b.nodeName?!1:!0},getStyle:function(b,d){return b.currentStyle?b.currentStyle[d]:Y.defaultView&&Y.defaultView.getComputedStyle?Y.defaultView.getComputedStyle(b,"")[d]:b.style[d]},usedStyle:function(e,f){var d;return d=T.getComputedStyle?T.getComputedStyle(e,null):e.currentStyle,d[f]}}),U=H.extend({init:function(f){var e=this,d=f.color;S(d)||""===d.trim()?e.color=e.getColor("#000"):e.color=e.getColor(d)},getColor:function(aa){var v=this,y=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,s=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,t=new RegExp("^(rgb|hsl|hsv)a?\\("+y.source+","+y.source+","+y.source+"(?:,"+s.source+")?\\)$","i"),u=aa.toLowerCase();"transparent"===u&&(aa="rgba(0,0,0,0)");var ab=aa.match(t);if(ab){var w=ab[1].toUpperCase(),h=S(ab[8])?ab[8]:parseFloat(ab[8]),x="H"===w[0],r=ab[3]?100:x?360:255,q=ab[5]||x?100:255,p=ab[7]||x?100:255;return v[w](parseFloat(ab[2])/r,parseFloat(ab[4])/q,parseFloat(ab[6])/p,h)}aa.length<6&&(aa=aa.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3"));var z=aa.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);return z?v.RGB(parseInt(z[1],16)/255,parseInt(z[2],16)/255,parseInt(z[3],16)/255):aa},RGB:function(j,i,h,g){var f=this;return{red:j,green:i,blue:h,alpha:S(g)?1:g,hex:function(){var b=(65536*Math.round(255*this.red)+256*Math.round(255*this.green)+Math.round(255*this.blue)).toString(16);return"#"+"00000".substr(0,6-b.length)+b},hexa:function(){var b=Math.round(255*this.alpha).toString(16);return"#"+"00".substr(0,2-b.length)+b+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+")"},cssa:function(){return"rgba("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+","+this.alpha+")"},toHSV:function(){var p,o=this.red,r=this.green,q=this.blue,n=Math.max(o,r,q),l=Math.min(o,r,q),m=n-l,b=0===n?0:m/n,a=n;if(0===m){p=0}else{switch(n){case o:p=(r-q)/m/6+(q>r?1:0);break;case r:p=(q-o)/m/6+1/3;break;case q:p=(o-r)/m/6+2/3}}return f.HSV(p,b,a,g)},toHSL:function(){var b=this.toHSV();return f.HSV(b.hue,b.saturation,b.value,b.alpha).toHSL()},toCMYK:function(){var k=this.red,b=this.green,a=this.blue,n=1-k,m=1-b,l=1-a,o=1;return k||b||a?(o=Math.min(n,Math.min(m,l)),n=(n-o)/(1-o),m=(m-o)/(1-o),l=(l-o)/(1-o)):o=1,f.CMYK(n,m,l,o,g)}}},HSV:function(j,i,h,g){var f=this;return{hue:j,saturation:i,value:h,alpha:S(g)?1:g,toRGB:function(){var u,s,t,n=this.hue,q=this.saturation,v=this.value,b=Math.min(5,Math.floor(6*n)),a=6*n-b,r=v*(1-q),p=v*(1-a*q),o=v*(1-(1-a)*q);switch(b){case 0:u=v,s=o,t=r;break;case 1:u=p,s=v,t=r;break;case 2:u=r,s=v,t=o;break;case 3:u=r,s=p,t=v;break;case 4:u=o,s=r,t=v;break;case 5:u=v,s=r,t=p}return f.RGB(u,s,t,g)},toHSL:function(){var m,b=(2-this.saturation)*this.value,k=this.saturation*this.value,l=1>=b?b:2-b;return m=1e-9>l?0:k/l,f.HSL(this.hue,m,b/2,this.alpha)}}},HSL:function(f,j,i,g){var h=this;return{hue:f,saturation:j,lightness:i,alpha:S(g)?1:g,toHSV:function(){var k,e=2*this.lightness,d=this.saturation*(1>=e?e:2-e);return k=1e-9>e+d?0:2*d/(e+d),h.HSV(this.hue,k,(e+d)/2,this.alpha)},toRGB:function(){return this.toHSV().toRGB()}}},CMYK:function(g,l,k,j,h){var i=this;return{cyan:g,magenta:l,yellow:k,black:j,alpha:S(h)?1:h,toRGB:function(){return i.RGB(1-this.cyan*(1-this.black)-this.black,1-this.magenta*(1-this.black)-this.black,1-this.yellow*(1-this.black)-this.black,this.alpha)}}},destroy:function(){this.color=null}});N.defaults=E,X.ui.plugin("ColorPicker",N),X.ui.ColorPicker=N}(jQuery,shield,this);