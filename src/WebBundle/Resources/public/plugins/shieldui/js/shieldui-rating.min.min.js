!function(s,r,n,k){var t,q,p=r.ui.Widget,m=(s.extend,r.is),o=m.undefined,l="change";t={min:0,max:5,step:1,symbolWidth:16,symbolHeight:16,enabled:!0,markPreset:!1,value:0,events:{}},q=p.extend({init:function(d,f){var e=this;p.fn.init.apply(e,arguments),e._enabled=e.options.enabled,e._renderRating(d,f,!1)},_setSelection:function(c){var d=this;return d._enabled?(d._value=c,d._markPreset&&(d._markPreset=!1),d._range.find(".sui-rating-hover").hide(),d._range.find(".sui-rating-selected").width(c*d._symbolWidth-d._min*d._symbolWidth).show(),d.trigger(l),!0):void 0},_calcRawScore:function(h,i){var j=this,g=i.changedTouches?i.changedTouches[0].pageX:i.pageX,b=g-s(h).offset().left;return j._ltr||(b=j._range.width()-b),b>j._range.width()&&(b=j._range.width()),0>b&&(b=0),Math.ceil(b/j._symbolWidth*(1/j._step))},_setHover:function(g){var e,h,f=this;f._enabled&&(e=g*f._symbolWidth*f._step,h=f._range.find(".sui-rating-hover"),h.width()!=e&&(f._range.find(".sui-rating-selected").hide(),h.width(e).show()))},_touchHandler:function(f){var h=f.originalEvent.changedTouches,g=h[0],j="";switch(f.type){case"touchmove":j="mousemove";break;case"touchend":j="mouseup";break;default:return}var i=document.createEvent("MouseEvent");i.initMouseEvent(j,!0,!0,n,1,g.screenX,g.screenY,g.clientX,g.clientY,!1,!1,!1,!1,0,null),g.target.dispatchEvent(i),f.preventDefault()},_renderRating:function(y,A,x){var B=this,w=1;if(B._item=B.element,B._item.hasClass("sui-rating")||B._item.addClass("sui-rating"),B._ltr=!B.element.parent().hasClass("sui-rtl"),x){var z=null;o(B._value)?(z=isNaN(A.value)?t.value:A.value,B._value=z):z=B._value,B._enabled&&(B._wired=!1)}if(!B._initialized){B._min=isNaN(A.min)?t.min:A.min,B._max=isNaN(A.max)?t.max:A.max,B._step=isNaN(A.step)?t.step:A.step,B._symbolWidth=isNaN(A.symbolWidth)?t.symbolWidth:A.symbolWidth,B._symbolHeight=isNaN(A.symbolHeight)?t.symbolHeight:A.symbolHeight,B._value=isNaN(A.value)?t.value:A.value,B._markPreset=isNaN(A.markPreset)?t.markPreset:A.markPreset,y="DIV"==B._item[0].nodeName?"div":"span",w++;var u='<{{element}} id="shieldRating-range-{{index}}" class="sui-rating-range" tabindex="0"><{{element}} class="sui-rating-selected" style="height:'+B._symbolHeight+'px"></{{element}}><{{element}} class="sui-rating-hover" style="height:'+B._symbolHeight+'px"></{{element}}></{{element}}>',f=u.replace(/{{index}}/gi,w).replace(/{{element}}/gi,y);this.element.append(f),B._initialized=!0}B._item.find(".sui-rating-selected, .sui-rating-hover").height(B._symbolHeight),B._range=B._item.find(".sui-rating-range"),B._range.width(B._symbolWidth*(B._max-B._min)).height(B._symbolHeight);var v="sui-rating-preset"+(B._ltr?"":"-rtl");if(B._markPreset?B._item.find(".sui-rating-selected").addClass(v):B._item.find(".sui-rating-selected").removeClass(v),null!=B._value){var a=(B._value-B._min)*B._symbolWidth;B._item.find(".sui-rating-selected").width(a)}B._wired||(B._enabled&&(x||(B._range.on("touchmove touchend",B._touchHandler),B._range.mousemove(function(b){var d=B._calcRawScore(this,b);B._setHover(d)}),B._range.mouseleave(function(b){B._range.find(".sui-rating-hover").hide().width(0),B._item.trigger("hover",[null]).trigger("over",[null]),B._range.find(".sui-rating-selected").show()}),B._range.mouseup(function(b){var g=B._calcRawScore(this,b),e=g*B._step+B._min;B._setSelection(e),B._range.blur()}),B._range.keyup(function(b){(38==b.which||b.which==(B._ltr?39:37))&&B._setSelection(Math.min(B._value+B._step,B._max)),(40==b.which||b.which==(B._ltr?37:39))&&B._setSelection(Math.max(B._value-B._step,B._min))}))),B._wired=!0)},value:function(){var f=this,h=f.options,g=[].slice.call(arguments);if(!(g.length>0)){return o(f._value)?o(h.value)?f._value:h.value:f._value}var e=g[0];e<f._min||e>f._max||(f.options.value=e,f._value=e,f._renderRating(f,h,!0))},enabled:function(){var f=this,g=f.options,e=f.element,h=[].slice.call(arguments);return h.length>0?(f._enabled=h[0],f._renderRating(f,g,!0),f._enabled?e.removeClass("sui-rating-disabled"):e.addClass("sui-rating-disabled"),void 0):f._enabled},destroy:function(){var b=this;s(b.element).removeClass("sui-rating-hover sui-rating-selected sui-rating-disabled sui-rating-preset-rtl sui-rating-preset sui-rating").empty(),b._range.off("touchmove touchend",b._touchHandler),b._markPreset=b._enabled=b._min=b._max=b._value=b._ltr=b._item=b._symbolWidth=b._symbolHeight=b._step=b._wired=b._initialized=b._range=null,p.fn.destroy.call(b)}}),q.defaults=t,r.ui.plugin("Rating",q)}(jQuery,shield,this);