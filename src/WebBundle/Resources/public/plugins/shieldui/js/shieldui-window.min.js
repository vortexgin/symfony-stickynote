/* Shield UI 1.7.18 Trial Version | Copyright 2013-2015 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(a,b,c,d){"use strict";var j,h,e=b.ui.Widget,m=(b.Class,b.Constants,b.format),w=document,g=(a.extend,a.map,a.each,a.proxy),k=b.error,l=b.is["boolean"],x=b.is.object,u=b.is.defined,s=(b.to.number,"close"),r="minimize",q="maximize",p="resize",o="scroll",t="pin",i="overflow",v="hidden",f="px",n="center";j={title:"",titleBarButtons:["pin","minimize","maximize","close"],content:d,cls:d,visible:!0,pinned:!1,modal:!1,width:400,height:300,resizable:{maxWidth:d,maxHeight:d,minWidth:200,minHeight:150},draggable:!0,position:d,appendToBody:!1,events:{}},h=e.extend({init:function(){e.fn.init.apply(this,arguments),u(this.initialOptions.titleBarButtons)&&(this.options.titleBarButtons=this.initialOptions.titleBarButtons);var y,v,q,c=this,d=c.options,r=d.cls,s=d.dieOnError,o=d.titleBarButtons,n=d.resizable,j=d.draggable,i=d.content,t=d.position,h=a(c.element),p=!1;return"div"!==a(h).prop("tagName").toLowerCase()?void k("shieldWindow: Underlying element is not DIV",s):o&&o.length>0&&!b.ui.Button?void k("shieldWindow: The titleBarButtons setting requires ShieldUI Button to be loaded",s):(c._eventNS="shieldWindow"+c.getInstanceId(),d.appendToBody?(h.appendTo(w.body),c._parentIsBody=!0):c._parentIsBody="body"==h.parent().prop("tagName").toLowerCase(),c._origHtml=h.html(),h.empty(),h.addClass("sui-window"+(r?" "+r:"")),q={width:d.width+f,height:d.height+f,position:"absolute"},h.css(q),c.titleBarEl=y=a('<div class="sui-window-titlebar"><div class="sui-window-title">'+d.title+'</div><div class="sui-window-icons"></div></div>').appendTo(h),c._initTitleBarButtons(),c.contentEl=v=a('<div class="sui-window-content"></div>').appendTo(h),c._fixContent(),x(t)?h.css(t):p=!0,n&&(l(n)&&(n={}),c.resizable=new b.ui.Resizable(h,n),c.resizable.on("resized",g(c._fixContent,c))),j&&(l(j)&&(j={}),j.handle=c.titleBarEl,c.draggable=new b.ui.Draggable(h,j)),c._hasIframe=!1,i?i.template?i.template.dataUrl?a.ajax({url:i.template.dataUrl,dataType:"json",success:function(a,b,d){c.content(m(i.template.body,a))},error:function(d,a,b){c.content("Error occured while reading URL: "+a+" - "+b)}}):c.content(m(i.template.body,i.template.data)):i.remote?i.remote.iframe?(c._hasIframe=!0,c.content('<iframe class="sui-window-iframe" src="'+i.remote.url+'" style="border:none; border-width:0px; width:100%; height:100%;"></iframe>')):c.contentEl.load(i.remote.url):c.content(c._origHtml):c.content(c._origHtml),c._minimized=!1,c._maximized=!1,c._destroyed=!1,c.pinned(!!d.pinned),c.visible(!!d.visible),void(p&&c.center()))},_initTitleBarButtons:function(){var f,h,b,d,c=this,i=c.options,e=i.titleBarButtons,j=i.modal;if(c.titleBarButtons={},e&&e.length>0){for(f=c.titleBarEl.find(".sui-window-icons"),d=0;d<e.length;d++)b=e[d],("pin"===b||"minimize"===b||"maximize"===b||"close"===b)&&(j&&"close"!==b||(h="pin"==b?"_onPin":"minimize"==b?"_onMinimize":"maximize"==b?"_onMaximize":b,c.titleBarButtons[b]=a('<button><div class="sui-sprite sui-window-button-icon sui-window-button-icon-'+b+'"></div></button>').appendTo(f).shieldButton({cls:"sui-window-button",events:{click:g(c[h],c,!0)}}).swidget()));f.on("mousedown",function(a){return a.preventDefault(),a.stopPropagation(),!1})}},_destroyTitleBarButtons:function(){var a,c=this,b=c.titleBarButtons;for(a in b)b.hasOwnProperty(a)&&b[a].destroy();c.titleBarButtons={}},_createModal:function(){var b=this,d=a(b._parentIsBody?c:b.element.parent()),e=a(d).scrollTop(),f=a(d).scrollLeft();b._lockScroll(),b._modal=a('<div class="sui-window-modal"></div>').insertBefore(b.element).css({top:e,left:f})},_closeModal:function(){var b=this;a(b._modal).remove(),b._unlockScroll()},_lockScroll:function(){var b=this,c=b.element.parent();b._scrollTop=a(c).scrollTop(),b._scrollLeft=a(c).scrollLeft(),b._parentOverflow=a(c).css(i),c.css(i,v).scrollTop(b._scrollTop).scrollLeft(b._scrollLeft)},_unlockScroll:function(){var a=this,b=a.element.parent();b.css(i,a._parentOverflow).scrollTop(a._scrollTop).scrollLeft(a._scrollLeft)},_fixContent:function(){var b=this;a(b.contentEl).outerWidth(a(b.element).innerWidth()).innerHeight(a(b.element).innerHeight()-a(b.titleBarEl).outerHeight()),b._hasIframe&&a(b.contentEl).find(".sui-window-iframe").width(a(b.contentEl).width()).height(a(b.contentEl).height())},center:function(){var d=this,e=a(d.element);b.ui.Position.Set(e,d._parentIsBody?c:e.parent(),{source:n,target:n})},position:function(b){a(this.element).css(b)},getHeight:function(){a(this.element).css("height")},getWidth:function(){a(this.element).css("width")},getPosition:function(){var b=a(this.element);return{left:b.css("left"),top:b.css("top")}},content:function(){var d=this,b=a(d.contentEl),c=[].slice.call(arguments);return c.length>0?(b.empty(),void b.append(c)):b.html()},resize:function(b){a(this.element).css(b),this._fixContent()},_scroll:function(g){var b=this,d=a(b.element),e=b._parentIsBody;b._pinned&&d.css({left:b.originalPosition.left+a(e?c:d.parent()).scrollLeft()+f,top:b.originalPosition.top+a(e?c:d.parent()).scrollTop()+f})},_onPin:function(a){this.pinned(!this._pinned,a)},pinned:function(){var d,i,b=this,e=[].slice.call(arguments),f=a(b.element),j=b._parentIsBody,h=b.titleBarEl,k=h.find(".sui-window-button-icon-pin").length>0?h.find(".sui-window-button-icon-pin"):h.find(".sui-window-button-icon-unpin");return e.length<=0?b._pinned:(d=!!e[0],void(b._pinned!=d&&(e[1]&&(i=b.trigger(t,{pinned:d}),i.isDefaultPrevented())||(b._pinned=d,k.removeClass("sui-window-button-icon-pin sui-window-button-icon-unpin"),k.addClass(b._pinned?"sui-window-button-icon-pin":"sui-window-button-icon-unpin"),b._pinned?(b.originalPosition=f.position(),a(j?c:f.parent()).on(o+"."+b._eventNS,g(b._scroll,b)),b.draggable&&b.draggable.enabled(!1)):(a(j?c:f.parent()).off(o+"."+b._eventNS),b.origininalPosition=null,b.draggable&&b.draggable.enabled(!0))))))},_onMinimize:function(a){this.minimized(!0,a)},minimized:function(){var e,c,h,b=this,f=[].slice.call(arguments),g=a(b.element),i=a(b.contentEl),d=b.titleBarEl,j=b.titleBarButtons.minimize;return f.length<=0?b._minimized:(c=!!f[0],void(b._minimized!=c&&(f[1]&&(h=b.trigger(r,{minimized:c}),h.isDefaultPrevented())||(b._minimized=c,e=d.find(".sui-window-button-icon-minimize").length>0?d.find(".sui-window-button-icon-minimize"):d.find(".sui-window-button-icon-unminimize"),e.removeClass("sui-window-button-icon-minimize sui-window-button-icon-unminimize"),e.addClass(b._minimized?"sui-window-button-icon-unminimize":"sui-window-button-icon-minimize"),c?(b._onMinCurrHeight=g.height(),g.height(d.height()),i.hide(),b.resizable&&b.resizable.enabled(!1)):(g.height(b._onMinCurrHeight),i.show(),b.resizable&&b.resizable.enabled(!0)),j&&j.visible(!c)))))},_onMaximize:function(b){var a=this;a._minimized?a.minimized(!1,b):a.maximized(!a._maximized,b)},maximized:function(){var f,k,h,l,b=this,i=[].slice.call(arguments),d=a(b.element),e=b._beforeMaximize,j=a(b.titleBarEl);return i.length>0?(f=!!i[0],k=!!i[1],b._minimized&&b.minimized(!1,!1),b._maximized!=f&&(k&&(l=b.trigger(q,{maximized:f}),l.isDefaultPrevented())||(b._maximized=!!f,h=j.find(".sui-window-button-icon-maximize").length>0?j.find(".sui-window-button-icon-maximize"):j.find(".sui-window-button-icon-restore"),h.removeClass("sui-window-button-icon-maximize sui-window-button-icon-restore"),h.addClass(b._maximized?"sui-window-button-icon-restore":"sui-window-button-icon-maximize"),b._maximized?(b._beforeMaximize={top:d.css("top"),left:d.css("left"),width:d.width(),height:d.height()},b.resize({width:"100%",height:a(b._parentIsBody?c:d.parent()).height()}),b._lockScroll(),b.center(),b._parentIsBody&&a(c).on(p+"."+b._eventNS,g(b._onWinResizeMax,b))):(e&&(d.css({top:e.top,left:e.left}),b.resize({width:e.width,height:e.height})),b._unlockScroll(),b._parentIsBody&&(a(c).off(p+"."+b._eventNS),b._winResize=null)))),void 0):b._maximized},_onWinResizeMax:function(){var b=this;a(b.element).height(a(c).height()),b._fixContent()},close:function(c){var a,b=this;c&&(a=b.trigger(s),a.isDefaultPrevented())||b.destroy()},visible:function(){var a=this,b=[].slice.call(arguments);if(!a._destroyed)return b.length>0&&a.options.modal&&(b[0]?a._createModal():a._closeModal()),e.fn.visible.apply(a,arguments)},destroy:function(){var b=this,c=b.options.cls;b.visible(!1),b._destroyed=!0,b.resizable&&(b.resizable.destroy(),b.resizable=null),b.draggable&&(b.draggable.destroy(),b.draggable=null),b._destroyTitleBarButtons(),b.maximized(!1),b.pinned(!1),a(b.element).removeClass("sui-window"+(c?" "+c:"")),b._origHtml&&(a(b.element).html(b._origHtml),b._origHtml=null),e.fn.destroy.call(b)}}),h.defaults=j,b.ui.plugin("Window",h)}(jQuery,shield,this);