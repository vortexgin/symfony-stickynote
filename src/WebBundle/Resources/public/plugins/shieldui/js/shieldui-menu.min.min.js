!function(aK,aI,S,aH){var an,aq,ab,ap,ax,at,aD=aI.ui.Widget,ac=(aI.Class,aI.DataSource),ad=aI.ui.Position,az=aI.Constants.KeyCode,au=document,aG=aK.proxy,Y=aK.each,af=aK.grep,al=aK.extend,V=aI.error,Z=aI.format,aJ=aI.is.defined,ao=aI.is["boolean"],U=aI.is.integer,aa=aI.is.func,aC="horizontal",aw="vertical",W="click",am="focus",ag="blur",aj="change",X="keydown",ai="tabindex",ah="disabled",ak="sui-menu-item-level",aB="sui-menu-item-expanded",ar="sui-menu-item-disabled",aE="sui-menu-item-selected",ae="sui-menu-item-index",ay="sui-menu-item-hover",aF="sui-menu-item-data-item",av="sui-menu-item-parent",aA="sui-menu-item-cc",T="sui-menu-item-cc-parent";an={cls:aH,width:aH,height:aH,dataSource:aH,readDataSource:!0,orientation:aC,delay:100,animation:{enabled:!0,openDelay:100,closeDelay:50},contentTemplate:"{content}",overflow:"flipfit",events:{}},aq=aD.extend({init:function(){aD.fn.init.apply(this,arguments);var x,u,t,v,w,A=this,y=aK(A.element),z=A.options,a=z.dieOnError,h=z.dataSource,e=z.cls,c=z.renderToINTERNAL,b=z.wrapOriginalINTERNAL,B=aJ(b)?b:!0;if(A._original=x=aK(A.element),A._tagname=t=x.prop("tagName").toLowerCase(),A._isContext=z.isContextINTERNAL,w=A._eventNS=".shieldMenu"+A.getInstanceId(),B?(A.wrapper=x.wrap("<div/>").parent(),A._isWrapped=!0):A._isWrapped=!1,x.hide(),A.element=y=aK('<ul class="sui-menu sui-menu-top sui-menu-'+z.orientation+(e?" "+e:"")+'"/>').on(am+w,aG(A._focus,A)).on(ag+w,aG(A._blur,A)).on(X+w,aG(A._keydown,A)),aK(c).length>0?aK(c).append(y):x.after(y),aJ(z.width)&&y.css("width",z.width),aJ(z.height)&&y.css("height",z.height),u=x.attr(ai),y.attr(ai,aJ(u)?u:"0"),A._isRtl=aI.support.isRtl(y),h){A.dataSource=ac.create(h)}else{if("ul"!==t){return A.destroy(),void V("shieldMenu: No dataSource or underlying UL element found.",a)}v=function(f){var g=[];return aK(f).children("li").each(function(){var k=aK(this),j=k.children("ul").length>0,i={cls:k.attr("data-class"),content:j?k.children().not("ul").first().html():k.html(),href:k.attr("data-href")?k.attr("data-href"):k.children().not("ul").first().attr("href"),disabled:k.attr("data-disabled")?k.attr("data-disabled"):aJ(k.attr(ah))&&null!==k.attr(ah),separator:"separator"===k.attr("data-role"),iconUrl:k.attr("data-icon-url"),iconCls:k.attr("data-icon-cls")};j&&(i.items=v(k.children("ul")[0])),g.push(i)}),g},A.dataSource=ac.create({data:x,schema:{parse:v}})}A.dataSource.on(aj+w,aG(A._dsChange,A)),z.readDataSource&&A.dataSource.read()},refresh:function(b){this.refreshWithElement(this._original,b)},_isFocused:function(){return aK(this.element).hasClass("sui-menu-focus")},_focus:function(d){var a=this;a._blurTimeout&&(clearTimeout(a._blurTimeout),a._blurTimeout=null),a._isFocused()||(aK(a.element).addClass("sui-menu-focus"),a.trigger(am))},_blur:function(d){var a=this;a._isFocused()&&(a._blurTimeout&&clearTimeout(a._blurTimeout),a._blurTimeout=setTimeout(function(){aK(a.element).removeClass("sui-menu-focus"),a._collapseAll(),a._deselectAll(),a.trigger(ag)},100))},_dsChange:function(){var b=this;b._renderItems(b.dataSource.view,b.element,0,null)},_getItemIcon:function(a){var d=aK('<span class="sui-menu-item-icon"/>');return a.iconUrl?d.append('<img src="'+a.iconUrl+'"/>'):a.iconCls&&d.addClass(a.iconCls),d},_renderItems:function(s,x,F,q){var K,N,k,c,E,J,L,I,f,o,H,a,M=this,z=M.options,p=(s||[]).length,e=af(s||[],function(b){return b.iconUrl||b.iconCls}).length>0;for(K=0;p>K;K++){N=s[K],k=!!N.disabled,E=N.href,J=N.separator,o=!J&&N.items&&N.items.length>0,f=N.iconUrl||N.iconCls,c=J?"&nbsp;":Z.call(M,z.contentTemplate,N),I=aK('<a class="sui-menu-item-link" '+(E?'href="'+E+'"':"")+' tabindex="-1"/>').append('<span class="sui-menu-item-text'+(o?" sui-menu-item-text-hc":"")+'">'+c+"</span>"),L=aK('<li class="sui-menu-item sui-unselectable'+(k?" sui-menu-item-disabled":"")+(J?" sui-menu-item-separator":"")+(N.cls?" "+N.cls:"")+'"/>').on("selectstart",function(){return !1}).appendTo(x).data(aF,N).data(av,q).data(ak,F).data(ar,k).data(ae,K).append(I),I.click(aG(M._itemClicked,M,L)).on(am,aG(M.focus,M)),!J&&e&&(F>0||f||z.orientation===aw)&&I.prepend(M._getItemIcon(N)),o&&(I.append('<span class="sui-menu-item-children-caret"/>'),H=aK('<div class="sui-menu-submenu"/>').hide().data(T,L).appendTo(L),H.css("z-index",aI.ui.Util.GetMaxZIndex(".sui-menu, .sui-menu-submenu",au.body)+1),a=aK('<ul class="sui-menu sui-menu-vertical"/>').appendTo(H),M._renderItems(N.items,a,F+1,L),L.data(aA,H).hover(aG(M._itemMouseEnter,M,L,!0),aG(M._itemMouseLeave,M,L,!0)))}},_itemMouseEnter:function(e,f){var d=this;e.addClass(ay),setTimeout(function(){e.hasClass(ay)&&d._itemExpand(e,f)},d.options.delay)},_itemMouseLeave:function(e,d){var f=this;e.removeClass(ay),f._itemCollapse(e,!0,d)},_itemExpand:function(x,k,i){var p,v=this,u=v.options,s=u.animation,j=x.data(ak),w=x.data(aA),r=0===j&&u.orientation===aC,f=x.data(aF),t=x.data(av);v._isExpandable(x)&&v._canHaveFocus(x)&&w&&(w.stop(!0,!0),t&&!v._isExpanded(t)&&v._itemExpand(t,!1,!0,!0),k&&(p=v.trigger("expand",{element:x,item:f})),r&&w.css("min-width",x.outerWidth()),w.show(),ad.Set(w,x,{source:"left top",target:r?"left bottom":"right top",overflow:u.overflow}),!i&&s&&s.enabled?w.hide().slideDown(s.openDelay,function(){x.data(aB,!0)}):x.data(aB,!0))},_itemCollapse:function(s,t,j,f){var b,r=this,k=r.options.animation,m=s.data(aA),a=s.data(aF),p=s.data(av);m&&(m.stop(!0,!0),j&&(b=r.trigger("collapse",{element:s,item:a})),t=aJ(t)?!!t:!0,aK(m).find("ul").first().children().each(function(){var c=aK(this);r._isExpanded(c)&&r._itemCollapse(c,t,!1,!0)}),!f&&k&&k.enabled?m.slideUp(k.closeDelay,function(){s.data(aB,!1),t&&p&&!p.hasClass(ay)&&r._itemCollapse(p,!0,!1,!0)}):(m.hide(),s.data(aB,!1),t&&t&&p&&!p.hasClass(ay)&&r._itemCollapse(p,!0,!1,!0)))},_collapseAll:function(){var a=this;aK(a.element).children("li").each(function(){var b=aK(this);a._isExpanded(b)&&a._itemCollapse(b,!1,!1,!0)})},_isExpandable:function(b){return !!b.data(aA)},_isExpanded:function(b){return b.data(aB)===!0},_hasExpanded:function(a){var f=this,e=a.data(aA);return a.data(aB)!==!0?!1:af(aK(e).find("ul").first().children(),function(c){return f._isExpanded(aK(c))||f._hasExpanded(aK(c))}).length>0},_canHaveFocus:function(b){return !b.data(ar)&&!b.data(aF).separator},_keydown:function(h){var g,b=this,f=!0;switch(h.keyCode){case az.UP:b._move("up",h);break;case az.DOWN:b._move("down",h);break;case az.LEFT:b._move("left",h);break;case az.RIGHT:b._move("right",h);break;case az.SPACE:case az.ENTER:g=b._getSelected(),aJ(g)&&(b._isExpanded(g)||b._itemExpand(g,!0),b._itemClicked(g));break;default:f=!1}f&&h.preventDefault()},_getFirstSelectableItem:function(f){var a,e=this;return aK(f).children("li").each(function(){var b=aK(this);return e._canHaveFocus(b)?(a=b,!1):void 0}),a},_getNextSelectableItem:function(n){var p,a,l=this,j=n.parent(),o=n.index(),m=j.children("li"),k=m.length;if(k-1>o){for(a=o+1;k>a;a++){if(p=aK(m[a]),l._canHaveFocus(p)){return p}}}if(o>0){for(a=0;o>a;a++){if(p=aK(m[a]),l._canHaveFocus(p)){return p}}}return n},_getPrevSelectableItem:function(n){var p,a,l=this,j=n.parent(),o=n.index(),m=j.children("li"),k=m.length;if(o>0){for(a=o-1;a>=0;a--){if(p=aK(m[a]),l._canHaveFocus(p)){return p}}}if(k-1>o){for(a=k-1;a>o;a--){if(p=aK(m[a]),l._canHaveFocus(p)){return p}}}return n},_move:function(n,d){var f,m,i,b,o=this,p=o._getSelected();o._isRtl;if(aJ(p)){if(f=p.parent().hasClass("sui-menu-vertical")?aw:aC,m=p.data(av),i=m?m.parent().hasClass("sui-menu-vertical")?aw:aC:aH,f===aC){if("up"===n){return void o._itemCollapse(p,!1,!0)}if("down"===n){if(!o._isExpandable(p)){return}o._itemExpand(p,!0),b=o._getFirstSelectableItem(p.find(".sui-menu-submenu > .sui-menu").first())}else{if("left"===n){if(b=o._getPrevSelectableItem(p),b===p){return}}else{if("right"!==n){return}if(b=o._getNextSelectableItem(p),b===p){return}}}}else{if("up"===n){if(0===p.index()){if(m&&i===aC){b=m,o._itemCollapse(b,!1,!0)}else{if(b=o._getPrevSelectableItem(p),b===p){return}}}else{if(b=o._getPrevSelectableItem(p),b===p){return}}}else{if("down"===n){if(b=o._getNextSelectableItem(p),b===p){return}}else{if("left"===n){if(!m||i!==aw){return}b=m,o._itemCollapse(b,!1,!0)}else{if("right"!==n){return}if(!o._isExpandable(p)){return}o._itemExpand(p,!0),b=o._getFirstSelectableItem(p.find(".sui-menu-submenu > .sui-menu").first())}}}}}else{b=o._getFirstSelectableItem(o.element)}aJ(b)&&(o._setSelected(b,!0),o.trigger("select",{element:b,item:b.data(aF)}))},_deselectAll:function(){var a=this;aK(a.element).find("."+aE).each(function(){aK(this).removeClass(aE)})},_setSelected:function(a,e){var f=this;f._canHaveFocus(a)&&(e?(f._deselectAll(),aK(a).addClass(aE)):aK(a).removeClass(aE))},_getSelected:function(){var d=this,a=aK(d.element).find("."+aE).first();return aK(a).length>0?a:aH},_isSelected:function(a){return aK(a).hasClass(aE)},_itemClicked:function(k,h){var j,l,f=this,i=k.data(aF);h&&h.isPropagationStopped()||(f._focus(),f._canHaveFocus(k)&&(l={item:i},f._isContext&&(l.element=at),j=f.trigger(W,l),h&&(h.stopPropagation(),j.isDefaultPrevented()&&h.preventDefault())))},_getItemByIndex:function(){var j,a,d=this,h=[].slice.call(arguments),i=aH;if(h.length>0){for(a=0;a<h.length;a++){if(j=h[a],!U(j)){return aH}if(i=0===a?aK(d.element).children("li:eq("+j+")"):aK(aK(i).data(aA)).children("ul").first().children("li:eq("+j+")"),aK(i).length<=0){return aH}}}return i},_getItemIndex:function(d){var c=[];do{c.unshift(d.data(ae)),d=d.data(av)}while(d);return c},enabled:function(){var h,a=this,d=[].slice.call(arguments),b=ao(d[0])?d.shift():aH;if(h=a._getItemByIndex.apply(this,d),aJ(h)){if(!aJ(b)){return !h.data(ar)}h.data(ar,!b),aK(h)[b?"removeClass":"addClass"]("sui-menu-item-disabled")}},expanded:function(){var h,b=this,g=[].slice.call(arguments),d=ao(g[0])?g.shift():aH;if(h=b._getItemByIndex.apply(this,g),aJ(h)){if(!aJ(d)){return b._isExpanded(h)}d?(b._collapseAll(),b._itemExpand(h,!1)):b._itemCollapse(h,!1,!1)}aJ(d)&&d===!1&&0===g.length&&b._collapseAll()},selected:function(){var b,h=this,g=[].slice.call(arguments),d=ao(g[0])?g.shift():aH;if(b=h._getItemByIndex.apply(this,g),aJ(b)){if(!aJ(d)){return h._isSelected(b)}h._setSelected(b,d)}aJ(d)&&d===!1&&0===g.length&&h._deselectAll()},selectedIndex:function(){var b=this,d=b._getSelected();return aJ(d)?b._getItemIndex(d):void 0},selectedData:function(){var a=this,b=a._getSelected();return aJ(b)?aK(b).data(aF):void 0},selectedItem:function(){return this._getSelected()},destroy:function(){var a=this,d=a._eventNS;a.dataSource&&a.dataSource.off(aj+d),aK(a.element).off(d).remove(),a._isWrapped&&a._original.unwrap(),a._original.show(),a._original=null,aD.fn.destroy.call(a)}}),aq.defaults=an,aI.ui.plugin("Menu",aq),ab=al({},an,{orientation:aw,target:aH,filter:aH,focusOnOpen:!0}),ap=aD.extend({init:function(){aD.fn.init.apply(this,arguments);var m,l,a=this,e=aK(a.element),n=a.options,c=n.events,h={};m=a._eventNS=".shieldContextMenu"+a.getInstanceId(),a.menuElement=l=aK('<div class="sui-context-menu"/>').hide().appendTo(au.body),Y(["focus","blur","expand","collapse","click","select"],function(f,b){var g=c[b];aa(g)&&(h[b]=aG(g,a))}),a._menu=new aq(e,al({},n,{renderToINTERNAL:l,wrapOriginalINTERNAL:!1,isContextINTERNAL:!0,events:h})),a._mouseTracker=new aI.MouseTracker,aK(n.target).on("contextmenu"+m,n.filter,function(b){return b.preventDefault(),a._open(a._mouseTracker.getPosition(b),aK(b.currentTarget),!0,!1),!1}),aK(au).on("mousedown"+m,function(b){aK(b.target).closest(".sui-context-menu").length<=0&&a._closeOpen(!0)})},_open:function(o,r,l,c){var n,t=this,s=t.menuElement,q=t.options,p=q.animation,m=q.focusOnOpen;t._closeOpen(!1),l&&(n=t.trigger("open",{element:r}),n.isDefaultPrevented())||(s.stop(!0,!0),s.show(),ad.Set(s,new aI.Event({pageX:o.x,pageY:o.y}),{source:"left top",target:"left top",overflow:q.overflow}),p&&p.enabled?s.hide().slideDown(p.openDelay,function(){ax=t,at=r,m&&t.focus()}):(ax=t,at=r,m&&t.focus()))},_close:function(h){var i,g=this,f=g.menuElement,j=g.options.animation;h&&(i=g.trigger("close"),i.isDefaultPrevented())||(ax=at=null,f.stop(!0,!0),j&&j.enabled?f.slideUp(j.closeDelay):f.hide())},_closeOpen:function(b){ax&&ax.closeINTERNAL(!0)},closeINTERNAL:function(b){this._close(b)},focus:function(){aK(this.menuElement).find(".sui-menu").first().focus()},visible:function(){var h,g,f=this,e=[].slice.call(arguments);return e.length>0?(h=!!e[0],g=e[1]?e[1]:f._mouseTracker.getPosition(),h?f._open(g,e[2],!1,!1):f._close(!1),f._visible=h,void 0):f._visible},enabled:function(){return this._menu.enabled.apply(this._menu,arguments)},expanded:function(){return this._menu.expanded.apply(this._menu,arguments)},selected:function(){return this._menu.selected.apply(this._menu,arguments)},selectedIndex:function(){return this._menu.selectedIndex.apply(this._menu,arguments)},selectedData:function(){return this._menu.selectedData.apply(this._menu,arguments)},selectedItem:function(){return this._menu.selectedItem.apply(this._menu,arguments)},destroy:function(){var a=this,d=a._eventNS;aK(au).off(d),aK(a.options.target).off(d),a._mouseTracker&&(a._mouseTracker.destroy(),a._mouseTracker=null),a._close(),a._menu&&(a._menu.destroy(),a._menu=null),aK(a.menuElement).remove(),aD.fn.destroy.call(a)}}),ap.defaults=ab,aI.ui.plugin("ContextMenu",ap)}(jQuery,shield,this);